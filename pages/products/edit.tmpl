<_info>
	<title>Редактор продукта</title>
	<template>default</template>
	
	<datajson>
		{
			"dataset" : {
				"name":"",
				"description":"",
				"tags":[],
				"content":"",
				"image":"",
				"hidden":false
			},

			"action_update": {
				"type":"handler",
				"handler":"ds-update",
				"data":{
					"dataset":"$dataset"
				}
			},
			
			"action_create": [
				{
					"type":"handler",
					"handler":"ds-update",
					"data":{
						"dataset":"$dataset",
						"type":"product"
					}
				},
				{
					"type":"href",
					"href":"?id={#}"
				}
			]
		}
	</datajson>

	<dataphp>
		GLOBAL $DS;
		$res = Array();
		if ($_GET['id']) {$res['dataset'] = $DS->get($_GET['id']);};
		return $res;
	</dataphp>

</_info>

<style>
	.image-dark .image-list {
		background-color:#272822;
		color:white;
	}
</style>

<_template>
	<div class="col-md-12"><h4 class="c-grey-900 mB-20">{{PAGE.title}}</h4></div>
	<div class="col-md-3">
		<div class="bgc-white image-dark bd bdrs-3 p-20 mB-20">
			<h5>Изображение</h5>
			<form-file-select label="Логотип" type="image" :multiple="false" v-model="dataset.image"></form-file-select>
			<form-file-select label="Мини логотип" type="image" :multiple="false" v-model="dataset.min_image"></form-file-select>
			<form-file-select label="Векторный логотип" type="image" :multiple="false" v-model="dataset.vector_logo"></form-file-select>
			<form-file-select label="Фоновое изображение" type="image" :multiple="false" v-model="dataset.back_image"></form-file-select>
		</div>
	</div>
	<div class="col-md-9">
		<div class="bgc-white bd bdrs-3 p-20 mB-20">
			<h5>Информация</h5>
			<form-input label="Название" v-model="dataset.name"></form-input>
			<form-textarea label="Описание" v-model="dataset.description"></form-textarea>
			<form-aceditor label="Контент" v-model="dataset.content"></form-aceditor>
			
			<form-file-select label="Фоновое видео" :multiple="false" v-model="dataset.video"></form-file-select>
			<form-checkbox label="Блинк логотипа" v-model="dataset.blinked"></form-checkbox>


			<action-btn v-if="dataset.id" label="Сохранить" :action="action_update"></action-btn>
			<action-btn v-else label="Создать" :action="action_create"></action-btn>
		</div>
	</div>

</_template>