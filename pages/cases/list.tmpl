<_info>
	<title>Список кейсов</title>
	<template>default</template>
	
	<datajson>
		{
			"columns": [
				{
					"name":"",
					"key":"image",
					"type":"image",
					"style": {
						"height":"56px",
						"margin":"auto",
						"display":"block"
					}
				},
				{
					"name":"Название",
					"key":"name"
				},
				{
					"name":"Описание",
					"key":"description"
				},
				{
					"name":"Скрыт",
					"key":"hidden"
				}
			],
			"buttons": [
				{
					"view":"text",
					"title":"Редактировать",
					"action": "href",
					"href":"./edit?id={id}"
				},
				{
					"view":"text",
					"title":"Удалить",
					"action": "remove"
				}
			]
		}
	</datajson>

	<dataphp>
		GLOBAL $DS;
		$list = $DS->list("case");
		foreach ($list as $key=>$row) {
			if (json_decode($row['hidden'],true)) {$row['hidden'] = "Да";} else {$row['hidden'] = "Нет";};
			$list[$key] = $row;
		};
		return Array("list"=>$list);
	</dataphp>

</_info>

<_template>

	<div class="bgc-white bd bdrs-3 p-20 mB-20 col-md-12">
		<h4 class="c-grey-900 mB-20">{{PAGE.title}}</h4>
		<ds-table :columns="columns" :data="list" :buttons="buttons" create_link="./edit"></ds-table>
	</div>

</_template>

